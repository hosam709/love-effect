<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ğŸ’–Ø®Ø¯ Ù‡Ù†Ø§ ØªØ¹Ø§Ù„ Ø¨Ø³ Ù‡Ù‚Ù„Ùƒ Ø­Ø§Ø¬Ù‡ ğŸ’–</title>

<style>
    body {
        margin:0;
        padding:0;
        background: radial-gradient(circle at top, #ff99cc, #ff0066, #33001b);
        color:white;
        text-align:center;
        font-family: "Tajawal", system-ui, sans-serif;
        overflow-x:hidden;
    }

    #box {
        margin-top: 8vh;
        font-size: 2rem;
        font-weight: bold;
        padding:20px;
        animation: fadeIn 2s ease forwards;
        opacity:0;
    }

    @keyframes fadeIn {
        to{opacity:1;}
    }

    .line = {
        display: none;
        font-size: 2.2rem;
        margin:20px 0;
        animation: pop 0.4s ease forwards;
    }

    @keyframes pop {
        0%{transform:scale(0.5); opacity:0;}
        100%{transform:scale(1); opacity:1;}
    }

    #final {
        display:none;
        font-size:2.1rem;
        margin-top:15px;
        animation: glow 1.5s infinite alternate;
    }

    @keyframes glow {
        from { text-shadow: 0 0 10px #fff; }
        to   { text-shadow: 0 0 25px #ffe6e6; }
    }

    #shareBtn {
        display:none;
        margin-top: 30px;
        padding: 12px 28px;
        font-size: 1.1rem;
        border-radius: 999px;
        border:none;
        cursor:pointer;
        background: linear-gradient(135deg,#ffcc00,#ff6600);
        color:#330000;
        font-weight:bold;
        box-shadow: 0 0 15px rgba(0,0,0,0.4);
    }

    #screenWrapper{
        margin:20px auto 10px;
        width:260px;
        height:260px;
        border-radius:50%;
        padding:6px;
        background: radial-gradient(circle, #fff, #ff6699);
        display:none;
        box-shadow:0 0 25px rgba(0,0,0,0.6);
    }

    #screenVideo{
        width:100%;
        height:100%;
        border-radius:50%;
        object-fit:cover;
        background:#000;
    }

    #infoTitle{
        display:none;
        margin-top: 10vh;
        font-size: 1.8rem;
        font-weight:bold;
    }

    #infoBox {
        margin: 15px auto 10px;
        max-width: 320px;
        background: rgba(0,0,0,0.35);
        border-radius: 18px;
        padding: 12px 16px;
        font-size: 0.95rem;
        line-height: 1.9;
        text-align:right;
        direction: rtl;
        display:none;
    }

    #infoBox span {
        font-weight:bold;
        color:#ffe6e6;
        word-break:break-word;
    }

</style>
</head>

<body>

<audio id="music">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_7a8b8e0cf5.mp3?filename=romantic-melody-140876.mp3" type="audio/mpeg">
</audio>

<div id="box">
    <div class="line">Ø§Ù†Ø§ Ø³Ø­Ø±Ù†ÙŠ Ø§Ù„Ù„ÙˆÙ† ÙŠØ§ Ø³Ù…Ø±Ø§ ğŸ’›</div>
    <div class="line">ÙˆØ§Ø®Ø¯Ø© Ù‚Ù„Ø¨ÙŠ Ø±ÙŠØ­Ù‡ Ø§Ù„Ø®Ù…Ø±Ø§ ğŸ’”</div>
    <div class="line">Ø¹Ù†ØªØ± Ù„Ùˆ Ø¬Ø§Ø¨ Ù†ÙŠØ§Ù‚ Ø­Ù…Ø±Ø§ ğŸ</div>
    <div class="line">Ø§Ù†Ø§ Ù‡Ø¬Ø± Ø§Ù„Ù†Ø¹Ù…Ø§Ù† Ù„ÙŠÙƒÙŠ ğŸ¤</div>
    <div class="line">ÙˆÙ†Ø¹Ù…Ù„ Ù…Ù† Ø±ÙŠØ¯ØªÙ†Ø§ Ù…Ø³Ù„Ø³Ù„ ğŸ¤</div>
    <div class="line">Ù„Ø³Ù‡ Ø¨Ø§Ù‚ÙŠÙ‡Ø§ Ø§Ø³ØªÙ†ÙŠ Ø¨Ø³ Ø®Ø¯ Ø¨Ù†Ø§ÙŠØ¨Ùƒ ØµØ¨Ø± ÙŠØ§ Ø­Ø¨ÙŠØ¨ÙŠ ğŸ˜</div>
</div>

<div id="final">â¤ï¸Ø®Ø¯ Ø¨Ù†Ø§ÙŠØ¨Ùƒ ØµØ¨Ø± Ø¨Ø³ ØªØ¹Ø§Ù„ â¤ï¸</div>

<button id="shareBtn">Ø§Ø³Ù…Ø¹ Ø§Ù„Ø§ØºÙ†ÙŠÙ‡ Ø¨ØµÙˆØª Ø§Ø­Ù…Ø¯ Ø¹Ø§Ø¯Ù„ Ø§Ø¶ØºØ· Ù‡Ù†Ø§ğŸ˜ğŸ”¥</button>

<h2 id="infoTitle">Ø­ØªÙ‡ ÙƒØ¯Ø§ Ø¹Ù„ÙŠ Ø§Ù„Ù…Ø§Ø´ÙŠ Ø¨ÙŠÙ†Ø§Øª ØªÙ„ÙÙˆÙ†Ùƒ ÙŠØ§ ØºÙˆÙˆÙˆÙ†Ù</h2>

<div id="infoBox">
    ğŸ”‹ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©: <span id="batteryLevel">--</span>%<br>
    ğŸŒ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù€ IP: <span id="ip">--</span><br>
    ğŸ“± Ù†ÙˆØ¹ Ø¬Ù‡Ø§Ø²Ùƒ: <span id="device">--</span><br>
    ğŸ“ Ù„ÙˆÙƒØ´Ù† Ø¨ÙŠØªÙƒÙ… ÙŠØ§ Ù…ØºÙÙ„Ù‚: <span id="location">ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥</span>
</div>

<!-- Ø§Ù„Ø³ÙƒØ±ÙŠÙ† ØªØ¸Ù‡Ø± ØªØ­Øª Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø² -->
<div id="screenWrapper">
    <video id="screenVideo" autoplay playsinline></video>
</div>

<script>
let lines = document.querySelectorAll(".line");
let index = 0;

let shareBtn     = document.getElementById("shareBtn");
let screenWrapper= document.getElementById("screenWrapper");
let screenVideo  = document.getElementById("screenVideo");

// Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø·ÙˆØ±
function showNext() {
    if (index < lines.length) {
        lines[index].style.display = "block";
        index++;
        setTimeout(showNext, 1300);
    } else {
        document.getElementById("final").style.display = "block";
        shareBtn.style.display = "inline-block";
    }
}

window.onload = () => setTimeout(showNext, 700);


// Ø¥Ø¸Ù‡Ø§Ø± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²
function showInfo() {
    document.getElementById("infoTitle").style.display = "block";
    document.getElementById("infoBox").style.display   = "block";

    // Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²
    document.getElementById("device").textContent = navigator.userAgent;

    // IP
    fetch("https://api.ipify.org?format=json")
        .then(r=>r.json())
        .then(d=> document.getElementById("ip").textContent = d.ip);

    // Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©
    if(navigator.getBattery){
        navigator.getBattery().then(b=>{
            document.getElementById("batteryLevel").textContent = Math.round(b.level*100);
        });
    }

    // Ø§Ù„Ù„ÙˆÙƒÙŠØ´Ù†
    if("geolocation" in navigator){
        navigator.geolocation.getCurrentPosition(pos=>{
            let lat = pos.coords.latitude.toFixed(4);
            let lon = pos.coords.longitude.toFixed(4);
            document.getElementById("location").textContent = lat+" , "+lon;
        }, ()=>{
            document.getElementById("location").textContent = "Ø±ÙØ¶Øª Ø§Ù„Ø³Ù…Ø§Ø­";
        });
    }
}


// Ø¶ØºØ· Ø§Ù„Ø²Ø± = Ù…Ø³Ø­ ÙƒÙ„ Ø´ÙŠØ¡ Ø«Ù… Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª + Ø§Ù„Ø³ÙƒØ±ÙŠÙ† (Ù„Ùˆ ÙˆØ§ÙÙ‚Øª)
shareBtn.addEventListener("click", async ()=>{

    // Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Ø´Ø© ÙƒÙ„Ù‡Ø§
    document.getElementById("box").style.display   = "none";
    document.getElementById("final").style.display = "none";
    shareBtn.style.display                         = "none";

    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    showInfo();

    // ØªØ¬Ø±Ø¨Ø© Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø© (Ù„Ùˆ Ø±ÙØ¶Øª â†’ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¨Ù‚Ù‰ ÙÙ‚Ø·)
    try{
        const stream = await navigator.mediaDevices.getDisplayMedia({
            video:{cursor:"always"},
            audio:false
        });

        screenWrapper.style.display = "block";
        screenVideo.srcObject = stream;

        stream.getVideoTracks()[0].addEventListener("ended", ()=>{
            screenWrapper.style.display = "none";
        });

    } catch(e){
        // Ø±ÙØ¶Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© â†’ ÙˆÙ„Ø§ Ù…Ø´ÙƒÙ„Ø©
    }
});
</script>

</body>
</html>
